<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="gmair.location.city">
    <resultMap id="cityVo" type="finley.gmair.model.district.City">
        <result property="cityId" column="city_id"></result>
        <result property="cityName" column="city_name"></result>
        <result property="cityPinyin" column="city_pinyin"></result>
        <result property="longitude" column="longitude"></result>
        <result property="latitude" column="latitude"></result>
        <result property="blockFlag" column="block_flag"></result>
        <result property="createAt" column="create_time"></result>
    </resultMap>

    <resultMap id="CityProvinceVo" type="finley.gmair.vo.location.CityProvinceVo">
        <result property="cityId" column="city_id"></result>
        <result property="provinceId" column="province_id"></result>
        <result property="cityName" column="city_name"></result>
        <result property="cityPinyin" column="city_pinyin"></result>
        <result property="blockFlag" column="block_flag"></result>
        <result property="createAt" column="create_time"></result>
    </resultMap>

    <insert id="insert" parameterType="java.util.Map" useGeneratedKeys="false">
        INSERT INTO gmair_location.city_list (city_id, province_id, city_name, city_pinyin, longitude, latitude, block_flag, create_time)
        VALUES
            (#{city.cityId}, #{provinceId}, #{city.cityName}, #{city.cityPinyin}, #{city.longitude}, #{city.latitude},
             #{city.blockFlag}, #{city.createAt})
    </insert>

    <select id="query" parameterType="java.util.Map" resultMap="cityVo">
        SELECT city_id, city_name, city_pinyin, longitude, latitude, block_flag, create_time
        FROM gmair_location.city_list
        WHERE 1 = 1
        <if test="provinceId != null">
            AND province_id = #{provinceId}
        </if>
        <if test="cityId != null">
            AND city_id = #{cityId}
        </if>
        <if test="cityName != null">
            AND city_name = #{cityName}
        </if>
        <if test="cityPinyin != null">
            AND city_pinyin = #{cityPinyin}
        </if>
        <if test="blockFlag != null">
            AND block_flag = #{blockFlag}
        </if>
    </select>

    <select id="queryProvinceId" parameterType="java.util.Map" resultMap="CityProvinceVo">
        SELECT city_id, province_id, city_name, city_pinyin, block_flag, create_time
        FROM gmair_location.city_list
        WHERE 1 = 1
        <if test="cityId != null">
            AND city_id = #{cityId}
        </if>
        <if test="cityName != null">
            AND city_name = #{cityName}
        </if>
        <if test="cityPinyin != null">
            AND city_pinyin = #{cityPinyin}
        </if>
        <if test="blockFlag != null">
            AND block_flag = #{blockFlag}
        </if>
    </select>

    <update id="update" parameterType="finley.gmair.model.district.City">
        UPDATE gmair_location.city_list
        SET
            city_name   = #{cityName},
            city_pinyin = #{cityPinyin},
            longitude   = #{longitude},
            latitude    = #{latitude}
        WHERE city_id = #{cityId}
    </update>
</mapper>