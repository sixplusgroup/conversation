<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="gmair.installation.snapshot">
    <resultMap id="Snapshot" type="finley.gmair.model.installation.Snapshot">
        <result property="snapshotId" column="snapshot_id" />
        <result property="assignId" column="assign_id" />
        <result property="codeValue" column="code_value" />
        <result property="wechatId" column="wechat_id" />
        <result property="memberPhone" column="member_phone" />
        <result property="picPath" column="pic_path" />
        <result property="net" column="net" />
        <result property="installType" column="install_type" />
        <result property="blockFlag" column="block_flag"/>
        <result property="createAt" column="create_time" />
    </resultMap>

    <insert id="insert" parameterType="finley.gmair.model.installation.Snapshot" useGeneratedKeys="false">
        REPLACE INTO gmair_install.install_snapshot(snapshot_id, assign_id, code_value, wechat_id, member_phone, pic_path, net, install_type, block_flag, create_time)
        VALUES (#{snapshotId},#{assignId},#{codeValue},#{wechatId},#{memberPhone},#{picPath},#{net},#{installType},#{blockFlag},#{createAt})
    </insert>

    <select id="query" parameterType="java.util.Map" resultMap="Snapshot">
        SELECT snapshot_id,assign_id,code_value,wechat_id,member_phone,pic_path,net,install_type,block_flag,create_time
        FROM gmair_install.install_snapshot
        where 1 = 1
        <if test="snapshotId !=null">
            AND snapshot_id = #{snapshotId}
        </if>
        <if test="assignId !=null">
            AND assign_id = #{assignId}
        </if>
        <if test="codeValue !=null">
            AND code_value = #{codeValue}
        </if>
        <if test="wechatId !=null">
            AND wechat_id = #{wechatId}
        </if>
        <if test="memberPhone !=null">
            AND member_phone = #{memberPhone}
        </if>
        <if test="net != null">
            AND net = #{net}
        </if>
        <if test="installType != null">
            AND install_type = #{installType}
        </if>
        <if test="blockFlag != null">
            AND block_flag = #{blockFlag}
        </if>
    </select>

</mapper>