<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="gmair.drift.equipment">
    <resultMap id="equipVo" type="finley.gmair.model.drift.Equipment">
        <result property="equipId" column="equip_id"></result>
        <result property="equipName" column="equip_name"></result>
        <result property="equipPrice" column="equip_price"></result>
        <result property="text" column="text"></result>
        <result property="url" column="url"></result>
        <result property="detailUrl" column="detail_url"></result>
        <result property="blockFlag" column="block_flag"></result>
        <result property="createAt" column="create_time"></result>
    </resultMap>

    <select id="query" parameterType="java.util.Map" resultMap="equipVo">
        select equip_id, equip_name, equip_price, text,url,detail_url,block_flag, create_time
        from gmair_drift.drift_equipment
        where 1 = 1
        <if test="equipId != null">
            and equip_id = #{equipId}
        </if>
        <if test="equipName != null">
            and equip_name = #{equipName}
        </if>
        <if test="equipPrice != null">
            and equip_price = #{equipPrice}
        </if>
        <if test="blockFlag  != null">
            and block_flag = #{blockFlag}
        </if>
        order by  create_time desc
    </select>

    <insert id="insert" parameterType="finley.gmair.model.drift.Equipment" useGeneratedKeys="false">
        insert into gmair_drift.drift_equipment(equip_id, equip_name, equip_price, block_flag, create_time)
        values(#{equipId}, #{equipName}, #{equipPrice}, #{blockFlag}, #{createAt})
    </insert>

    <update id="update" parameterType="java.util.Map">
        update gmair_drift.drift_equipment
        <set>
            <if test="equipName != null">
                equip_name = #{equipName},
            </if>
            <if test="equipPrice != null">
                equip_price = #{equipPrice},
            </if>
            <if test="blockFlag  != null">
                block_flag = #{blockFlag},
            </if>
            equip_id = #{equipId}
        </set>
        where equip_id = #{equipId}
    </update>
</mapper>